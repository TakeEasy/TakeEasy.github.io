---
title: 玩蛇笔记之Python中的文件操作
date: 2017-06-04 19:27:03
categories:
- 开发
- Python
tags:
- Python
- 文件操作
---
{% cq %} 人生苦短,我玩Python {% endcq %}
{% fi /img/12.png, ..., Python %}
<!-- more -->
> Python常用的文件操作

------

### 打开文件
+ `open(文件名,模式,编码)`反返回一个文件对象,编码默认utf-8.
        
        f=open('haha.log','r')
        data=f.read()
        f.close
        print(data)

+ 基本打开文件的模式
        
        r,只读模式,默认此模式
        w,只写模式,不可读 不存在则创建,存在则清空
        x,只写模式,不可读 不存在则创建,存在则报错
        a,追加模式,不可读 不存在则创建,存在只追加内容

+ `read()`返回的是字符串,如果我们想要字节得自己用`bytes()`转换,麻烦,Python3可以直接用字节打开文件
        
        rb,以字节方式只读打开,直接返回字节不帮你转换成字符串.
        wb,以字节方式只写打开,写的时候只能写入字节类型的内容.

+ 如果既想读又想写文件打开的就加`+`
        
        r+,读写 .
        w+,写读 先清空文件内容.写之后可以读内容,否则读到空.
        x+,写读 跟w+一样,只是文件存在会报错.
        a+,写读 打开的同时把指针移到最后.

------

### 文件的操作
+ 文件的读写存在一个文件指针的概念,类似编辑文档的时候光标的位置.`f.tell()`可以返回当前文件指针在文件对象中的位置,`f.seek()`可以调整指针位置.**指针位置永远指的是在字节中的位置.**
+ `read()`默认读取全部内容,并且将文件指针移到最后,可以通过`f.read(3)`来指定读取多少内容**如果文件对象以字符串打开,数字表示字符数,如果以字节打开,数字表示读取字节数**并移动指针到对应位置.
+ `f.write()`写的时候也是根据指针的位置.
+ `f.close()`关闭文件对象
+ `f.fileno()`文件描述符,跟sockit有关 io操作会用到.
+ `f.flush()`如果我们对文件对象进行了一系列操作,但没有close它,那么对它的所有操作都停留在内存中,可以用此方法将内存中的数据刷新到硬盘中.
+ `f.readable()`是否可读
+ `f.readline()`读一行
+ `f.truncate()`从头截取到文件指针所在的位置
+ `f.writeable()`是否可写
+ 可以用以下的方法读文件的每一行,可以不用担心文件一共有多少行
        
        for line in f:
            print(line)

+ 使用`with`关键字来方便我们操作文件,不用我们手动关闭文件对象.
        
        with open('ha.log','r') as f:
            f.read()

+ Python2.7之后`with`可以同时打开两个文件,这样当需要操作两个大文件的时候就很有用.
        
        with open('ha.log','r') as f,open('ha.log','r') as f2:
            pass

